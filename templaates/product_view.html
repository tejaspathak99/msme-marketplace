{% extends "base.html" %}

{% block title %}{{ product.name }} - MSME Marketplace{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-6 mb-4">
        {% if product.image_filename %}
        <img src="{{ product.image_filename }}" class="img-fluid rounded" alt="{{ product.name }}">
        {% else %}
        <div class="bg-secondary text-white d-flex align-items-center justify-content-center rounded" style="height: 400px;">
            <h3>No Image Available</h3>
        </div>
        {% endif %}
    </div>
    <div class="col-md-6">
        <h1>{{ product.name }}</h1>
        <p class="lead">{{ product.description }}</p>
        
        <hr>
        
        <div class="mb-3">
            <h4>Price: <span class="text-success">${{ "%.2f"|format(product.price) }}</span></h4>
        </div>
        
        <div class="mb-3">
            <p><strong>Category:</strong> <span class="badge bg-primary">{{ product.category }}</span></p>
        </div>
        
        <div class="mb-3">
            <p><strong>Minimum Order Quantity:</strong> {{ product.min_order_qty }}</p>
        </div>
        
        <div class="mb-3">
            <p><strong>Supplier:</strong> {{ product.supplier.username }}</p>
        </div>
        
        <hr>
        
        <div class="d-flex gap-2">
            {% if current_user.role == 'supplier' and current_user.id == product.supplier_id %}
                <a href="{{ url_for('edit_product', id=product.id) }}" class="btn btn-warning">Edit Product</a>
                <a href="{{ url_for('delete_product', id=product.id) }}" 
                   class="btn btn-danger"
                   onclick="return confirm('Are you sure you want to delete this product?')">Delete Product</a>
            {% endif %}
            
            {% if current_user.role == 'buyer' %}
                <a href="{{ url_for('buyer_dashboard') }}" class="btn btn-secondary">Back to Products</a>
            {% elif current_user.role == 'supplier' %}
                <a href="{{ url_for('supplier_dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
            {% elif current_user.role == 'admin' %}
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}